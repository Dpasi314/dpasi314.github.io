<html>
	<style>
		#emotion-selection {
			display: flex;
			flex-direction: column;
			align-items: center;
			height: 95%;
		}

		#rating-selection {
			display: none;
			align-items: center;

		}

		#comment-section {
			display: none;
			align-items: center;

		}

		input[type=button] {
			width: 95%;
			height: 5%;
			margin-bottom: 5px;
		}

	</style>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<meta charset="utf-8"/>

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	        <meta name="apple-mobile-web-app-capable" content="yes">
	        <meta name="mobile-web-app-capable" content="yes">
	        
	        <!-- Have to manually define the icons for iPhones; Android looks at the manifest file -->
	        <link rel="apple-touch-icon" href="images/icons/icon-512x512.png">
	        <link rel="apple-touch-icon" href="images/icons/icon-384x384.png">
	        <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
	        <link rel="apple-touch-icon" href="images/icons/icon-144x144.png">
	        <link rel="apple-touch-icon" href="images/icons/icon-128x128.png">
	        <link rel="apple-touch-icon" href="images/icons/icon-96x96.png">
	        <link rel="apple-touch-icon" href="images/icons/icon-72x72.png">
	        
	        <!-- Link to the Manifest file  -->
	        <link rel="manifest" href="manifest.json">
	</head>
	<body>
		<input hidden id="emotion">
		<input hidden id="rating">
		<input hidden id="comments">
		<div id="emotion-selection">
			<input type="button" onclick="setEmotion(this.value)" value="Happiness"/>
			<input type="button" onclick="setEmotion(this.value)" value="Affection"/>
			<input type="button" onclick="setEmotion(this.value)" value="Interest"/>
			<input type="button" onclick="setEmotion(this.value)" value="Excitement"/>
			<input type="button" onclick="setEmotion(this.value)" value="Pride"/>
			<input type="button" onclick="setEmotion(this.value)" value="Desire"/>
			<input type="button" onclick="setEmotion(this.value)" value="Love"/>
			<input type="button" onclick="setEmotion(this.value)" value="Loved"/>
			<input type="button" onclick="setEmotion(this.value)" value="Thankfulness"/>
			<input type="button" onclick="setEmotion(this.value)" value="Stress"/>
			<input type="button" onclick="setEmotion(this.value)" value="Hurt"/>
			<input type="button" onclick="setEmotion(this.value)" value="Sadness"/>
			<input type="button" onclick="setEmotion(this.value)" value="Irritation"/>
			<input type="button" onclick="setEmotion(this.value)" value="Anger"/>
			<input type="button" onclick="setEmotion(this.value)" value="Pity"/>
			<input type="button" onclick="setEmotion(this.value)" value="Disgust"/>
			<input type="button" onclick="setEmotion(this.value)" value="Guilt"/>
			<input type="button" onclick="setEmotion(this.value)" value="Envy"/>
			<input type="button" onclick="setEmotion(this.value)" value="Regret"/>
			<input type="button" onclick="setEmotion(this.value)" value="Shame"/>
			<div style="display: flex; flex-direction: row; width: 100%; height: 15%; justify-content: center;">
				<button style="width: 40%; height: 50%; margin-top: 6%; align-self: center;" onclick="next('emotion-selection')">Next</button>
			</div>
		</div>

		<div id="rating-selection" style="display: hidden; flex-direction: column;">
			<input id="rating", type="range", min="1", max="10" value="1" onchange="setRating(this.value)" />
			<br/>
			<p id="rating-value"></p>
			<div style="display: flex; flex-direction: row; width: 100%; height: 15%; justify-content: center;">
				<button style="width: 40%; height: 7%; margin-top: 6%; " onclick="back('rating-selection')">Back</button>
				<button style="width: 40%; height: 7%; margin-top: 6%; " onclick="next('rating-selection')">Next</button>
			</div>
		</div>
		
		<div id="comment-section" style="display: hidden; flex-direction: column;">
			<textarea id="comments" onchange="setComments(this.innerHTML)"></textarea>
			<div style="display: flex; flex-direction: row; width: 100%; height: 15%; justify-content: center;">
				<button style="width: 40%; height: 7%; margin-top: 6%; " onclick="back('comment-section')">Back</button>
				<button style="width: 40%; height: 7%; margin-top: 6%; " onclick="next('comment-section')">Next</button>
			</div>
		</div>

	</body>
	
	
</html>


<script>
	function setEmotion(emotion) {
		document.getElementById("emotion").value = emotion;
	}

	function setRating(rating) {
		document.getElementById("rating").value = rating;
		document.getElementById("rating-value").innerHTML = rating;
	}

	function setComments(comments) {
		//document.getElementById("comments").innerHTML = comments;
	}

	function next(parent) {
		if(parent === "emotion-selection") {
			document.getElementById("emotion-selection").style.display = "none";
			document.getElementById("rating-selection").style.display = "flex";
		} else if(parent === "rating-selection") {
			document.getElementById("rating-selection").style.display = "none";
			document.getElementById("comment-section").style.display = "flex";
		} else if(parent === "comment-section") {
			post()
			document.getElementById("comment-section").style.display = "none";
			document.getElementById("emotion-selection").style.display = "flex";
		}
	}

	function back(parent) {
		if(parent === "emotion-selection") {
			document.getElementById("emotion-selection").style.display = "flex";
		} else if(parent === "rating-selection") {
			document.getElementById("emotion-selection").style.display = "flex";
			document.getElementById("rating-selection").style.display = "none";
		} else if(parent === "comment-section") {
			document.getElementById("comment-section").style.display = "none";
			document.getElementById("rating-selection").style.display = "flex";
		}
	}

	function post() {
	  var url = "https://script.google.com/macros/s/AKfycbz9lurXCM4EVgn2tYf6Ds9_uKcR2tEDHiFgjOdeqP9ud1FTznqUaZquIBvcxR6pctv9qQ/exec"
	  fetch(url, {mode:'no-cors', method: "POST", body: JSON.stringify({
				    "Emotion": document.getElementById("emotion").value,
				    "Rating": document.getElementById("rating").value,
				    "Comments": document.getElementById("comments").innerHTML.toString(),
				})})
	    .then((res) => {
	    
	      return res.text();
	    })
    .then((res) => console.log(res));
}
	
	window.googleDocCallback = function () { return true; };

	
</script>
